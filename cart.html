<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–°—Ç–æ–ª–∞—Ä–∏—ò–∞.mk - –ö–æ—à–Ω–∏—á–∫–∞">
    <title>–°—Ç–æ–ª–∞—Ä–∏—ò–∞.mk - –ö–æ—à–Ω–∏—á–∫–∞</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav class="navbar" role="navigation" aria-label="Glavna navigacija">
            <div class="logo">
                <a href="index.html" aria-label="–ü–æ—á–µ—Ç–Ω–∞ —Å—Ç—Ä–∞–Ω–∞">
                    <img src="logo.png" alt="–°—Ç–æ–ª–∞—Ä–∏—ò–∞.mk –õ–æ–≥–æ" class="logo-img">
                </a>
            </div>
            <button class="mobile-menu-btn" aria-label="Meni" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links">
                <li><a href="index.html#pocetna">–ü–æ—á–µ—Ç–Ω–∞</a></li>
                <li><a href="index.html#produkti">–ü—Ä–æ–¥—É–∫—Ç–∏</a></li>
                <li><a href="index.html#za-nas">–ó–∞ –ù–∞—Å</a></li>
            </ul>
            <div class="cart-icon">
                <a href="cart.html" aria-label="–ö–æ—à–Ω–∏—á–∫–∞">
                    üõí
                    <span class="cart-count">0</span>
                </a>
            </div>
        </nav>
    </header>

    <main class="cart-page">
        <div class="cart-container">
            <h1>–í–∞—à–∞—Ç–∞ –ö–æ—à–Ω–∏—á–∫–∞</h1>
            
            <div class="cart-content">
                <div class="cart-items">
                    <!-- Cart items will be loaded here -->
                </div>

                <div class="cart-summary">
                    <h2>–í–∫—É–ø–Ω–æ</h2>
                    <div class="summary-item">
                        <span>–ü—Ä–æ–∏–∑–≤–æ–¥:</span>
                        <span id="subtotal">0 –¥–µ–Ω.</span>
                    </div>
                    <div class="summary-item">
                        <span>–î–æ—Å—Ç–∞–≤–∞:</span>
                        <span id="delivery-cost">0 –¥–µ–Ω.</span>
                    </div>
                    <div class="summary-item total">
                        <span>–í–∫—É–ø–Ω–æ –∑–∞ –ø–ª–∞—ú–∞—ö–µ:</span>
                        <span id="total">0 –¥–µ–Ω.</span>
                    </div>

                    <div class="delivery-options">
                        <h3>–î–æ—Å—Ç–∞–≤–∞</h3>
                        <select id="delivery-city" onchange="updateDeliveryCost()">
                            <option value="skopje">–°–∫–æ–ø—ò–µ</option>
                            <option value="other">–î—Ä—É–≥–∏ –≥—Ä–∞–¥–æ–≤–∏</option>
                        </select>
                    </div>

                    <div class="payment-options">
                        <h3>–ù–∞—á–∏–Ω –Ω–∞ –ø–ª–∞—ú–∞—ö–µ</h3>
                        <select id="payment-method">
                            <option value="card">–ü–ª–∞—ú–∞—ö–µ —Å–æ –∫–∞—Ä—Ç–∏—á–∫–∞</option>
                            <option value="cash">–ü–ª–∞—ú–∞—ö–µ —Å–æ –≥–æ—Ç–æ–≤–æ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∞</option>
                            <option value="transfer">–ë–∞–Ω–∫–∞—Ä—Å–∫–∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä</option>
                            <option value="installments">–ü–ª–∞—ú–∞—ö–µ –Ω–∞ —Ä–∞—Ç–∏</option>
                        </select>
                    </div>

                    <button class="checkout-button" onclick="proceedToCheckout()">
                        –ü—Ä–æ–¥–æ–ª–∂–∏ —Å–æ –Ω–∞—Ä–∞—á–∫–∞—Ç–∞
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç</h3>
                <p>üìû +389 2 123 4567</p>
                <p>‚úâÔ∏è info@stolarija.mk</p>
                <p>üìç –°–∫–æ–ø—ò–µ, –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞</p>
            </div>
            <div class="footer-section">
                <h3>–°–ª–µ–¥–µ—Ç–µ –Ω√®</h3>
                <div class="social-links">
                    <a href="#" aria-label="Facebook">üìò</a>
                    <a href="#" aria-label="Instagram">üì∏</a>
                    <a href="#" aria-label="Twitter">üê¶</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 –°—Ç–æ–ª–∞—Ä–∏—ò–∞.mk. –°–∏—Ç–µ –ø—Ä–∞–≤–∞ —Å–µ –∑–∞–¥—Ä–∂–∞–Ω–∏.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Load cart items when page loads
        window.addEventListener('load', () => {
            displayCartItems();
            updateDeliveryCost();
        });

        function updateDeliveryCost() {
            const subtotal = calculateSubtotal();
            const city = document.getElementById('delivery-city').value;
            let deliveryCost = 0;

            if (subtotal >= 10000) {
                deliveryCost = 0; // Free delivery for orders over 10000
            } else {
                deliveryCost = city === 'skopje' ? 200 : 300;
            }

            document.getElementById('delivery-cost').textContent = `${deliveryCost} –¥–µ–Ω.`;
            document.getElementById('total').textContent = `${subtotal + deliveryCost} –¥–µ–Ω.`;
        }

        function calculateSubtotal() {
            return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        }

        function displayCartItems() {
            const cartItemsContainer = document.querySelector('.cart-items');
            if (!cartItemsContainer) return;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="empty-cart">–í–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—á–∫–∞ –µ –ø—Ä–∞–∑–Ω–∞</p>';
                return;
            }

            cartItemsContainer.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}">
                    <div class="cart-item-info">
                        <h4>${item.name}</h4>
                        <p>${item.price} –¥–µ–Ω. x ${item.quantity}</p>
                    </div>
                    <div class="cart-item-actions">
                        <button onclick="updateQuantity(${item.id}, ${item.quantity - 1})">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, ${item.quantity + 1})">+</button>
                        <button onclick="removeFromCart(${item.id})" class="remove-item">‚ùå</button>
                    </div>
                </div>
            `).join('');

            document.getElementById('subtotal').textContent = `${calculateSubtotal()} –¥–µ–Ω.`;
            document.querySelector('.cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        }

        function updateQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }

            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = newQuantity;
                displayCartItems();
                updateDeliveryCost();
            }
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert('–í–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—á–∫–∞ –µ –ø—Ä–∞–∑–Ω–∞');
                return;
            }

            const paymentMethod = document.getElementById('payment-method').value;
            const deliveryCity = document.getElementById('delivery-city').value;
            const total = calculateSubtotal() + (calculateSubtotal() >= 10000 ? 0 : (deliveryCity === 'skopje' ? 200 : 300));

            // Get payment method text in Macedonian
            let paymentMethodText = '';
            switch(paymentMethod) {
                case 'card':
                    paymentMethodText = '–ü–ª–∞—ú–∞—ö–µ —Å–æ –∫–∞—Ä—Ç–∏—á–∫–∞';
                    break;
                case 'cash':
                    paymentMethodText = '–ü–ª–∞—ú–∞—ö–µ —Å–æ –≥–æ—Ç–æ–≤–æ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∞';
                    break;
                case 'transfer':
                    paymentMethodText = '–ë–∞–Ω–∫–∞—Ä—Å–∫–∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä';
                    break;
                case 'installments':
                    paymentMethodText = '–ü–ª–∞—ú–∞—ö–µ –Ω–∞ —Ä–∞—Ç–∏';
                    break;
            }

            // Show success message
            alert(`–ù–∞—Ä–∞—á–∫–∞—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞!\n–ù–∞—á–∏–Ω –Ω–∞ –ø–ª–∞—ú–∞—ö–µ: ${paymentMethodText}\n–í–∫—É–ø–Ω–æ: ${total} –¥–µ–Ω.`);

            // Reset cart
            cart = [];
            localStorage.removeItem('cart');
            displayCartItems();
            updateDeliveryCost();
            updateCartCount();

            // Redirect to home page after 1 second
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1000);
        }
    </script>
</body>
</html> 